package com.apps.controller;import com.apps.entity.UserDao;import com.apps.service.UserService;import com.apps.util.DateUtility;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.beans.propertyeditors.CustomDateEditor;import org.springframework.data.domain.Page;import org.springframework.web.bind.ServletRequestDataBinder;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.bind.annotation.InitBinder;import org.springframework.web.bind.annotation.PostMapping;import org.springframework.web.bind.annotation.PutMapping;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestParam;import org.springframework.web.bind.annotation.RestController;import javax.servlet.http.HttpServletRequest;import java.text.SimpleDateFormat;import java.util.Date;import java.util.List;import java.util.TimeZone;/** * The type User controller. * * @author SimonYang * @date 2019 /2/10 */@RestController@RequestMapping(value = "/user")public class UserController {    private final UserService userService;    private final UserDao userDao;    @Autowired    public UserController(UserService userService, UserDao userDao) {        this.userService = userService;        this.userDao = userDao;    }    /**     * Init.     *     * @param request     *         the request     * @param binder     *         the binder     */    @InitBinder    protected void init(HttpServletRequest request, ServletRequestDataBinder binder) {        /*TimeZone時區，解決差8小時的問題*/        SimpleDateFormat dateFormat = new SimpleDateFormat(DateUtility.FORMAT_DATETIME);        dateFormat.setTimeZone(TimeZone.getTimeZone(DateUtility.UTC));        binder.registerCustomEditor(Date.class, new CustomDateEditor(dateFormat, false));    }    /**     * Gets user list.     *     * @return the user list     */    @GetMapping(value = "/getUserList")    public List<UserDao> getUserList() {        return userService.findAllList();    }    /**     * Gets user info by name.     *     * @param name     *         the name     * @return the user info by name     */    @GetMapping(value = "/getUser")    public UserDao getUserInfoByName(@RequestParam("name") String name) {        return userService.findByUserName(name).orElse(null);    }    /**     * Gets current user list.     *     * @return the current user list     */    @GetMapping(value = "/getCurrentUserList")    public List<UserDao> getCurrentUserList() {        return userService.getCurrentUserList();    }    /**     * Gets page user list.     *     * @return the page user list     */    @GetMapping(value = "/getPageUserList")    public Page<UserDao> getPageUserList() {        return userService.getPageUserList();    }    /**     * Add user user dao.     *     * @param userInfo     *         the user info     * @return the user dao     */    @PutMapping(value = "/addUser")    public UserDao addUser(UserDao userInfo) {        return userService.save(userInfo, "TEST", "127.0.0.1").orElse(null);    }    /**     * Update user user dao.     *     * @param userInfo     *         the user info     * @return the user dao     */    @PostMapping(value = "/updateUser")    public UserDao updateUser(UserDao userInfo) {        return userService.save(userInfo, "TEST", "127.0.0.1").orElse(null);    }    /**     * Enable user user dao.     *     * @param userInfo     *         the user info     * @return the user dao     */    @PostMapping(value = "/enableUser")    public UserDao enableUser(UserDao userInfo) {        return userService.enable(userInfo.getId(), "TEST", "127.0.0.1").orElse(null);    }    /**     * Remove user user dao.     *     * @param userInfo     *         the user info     * @return the user dao     */    @PostMapping(value = "/removeUser")    public UserDao removeUser(UserDao userInfo) {        return userService.remove(userInfo.getId(), "TEST", "127.0.0.1").orElse(null);    }    /**     * Delete user info.     *     * @param id     *         the id     */    @PostMapping(value = "/deleteUser")    public void deleteUserInfo(@RequestParam("id") String id) {        userService.delete(id);    }}